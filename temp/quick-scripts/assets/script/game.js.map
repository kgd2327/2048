{"version":3,"sources":["game.js"],"names":["ROWS","NUMBERS","MINLEN","MOVEINTERVAL","cc","Class","extends","Component","properties","scoreLab","Label","score","blockPrefab","Prefab","interval","overFrame","Node","blockParent","onLoad","drawBgBlock","init","systemEvent","on","data","blockSize","winSize","width","x","y","positions","i","push","Array","fill","j","block","instantiate","height","addChild","setPosition","v2","emit","updateScore","blocks","destroy","addBlock","addEventHandler","getEmptyLocation","locations","length","number","string","location","Math","floor","random","position","num","node","touchStart","touchEnd","destroyEventHandler","off","event","startPoint","getLocation","endPoint","vec","sub","mag","abs","moveRight","moveLeft","moveUp","moveDown","checkFail","n","gameOver","afterMove","hasMoved","log","toMove","move","callback","doMove","counter","moveTo","call","callFunc","runAction","sequence"],"mappings":"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","file":"game.js","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["const ROWS = 4;\r\nconst NUMBERS = [2,4];\r\nconst MINLEN = 50;\r\nconst MOVEINTERVAL = 0.1;\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        scoreLab:cc.Label,\r\n        score:0,\r\n        blockPrefab:cc.Prefab,\r\n        interval:20,\r\n        overFrame:cc.Node,\r\n        blockParent:cc.Node\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    onLoad:function(){\r\n        this.drawBgBlock();\r\n        this.init();\r\n        cc.systemEvent.on('over',(data)=>{\r\n            this.init();\r\n        });\r\n    },\r\n\r\n    drawBgBlock:function()\r\n    {\r\n        this.blockSize = (cc.winSize.width - this.interval * (ROWS+1))/ROWS;\r\n        var x = this.interval + this.blockSize/2;\r\n        let y = this.blockSize;\r\n        this.positions = [];\r\n        for(var i=0;i<ROWS;i++)\r\n        {\r\n            this.positions.push(new Array(ROWS).fill(0));\r\n            for(var j=0;j<ROWS;j++)\r\n            {\r\n                var block = cc.instantiate(this.blockPrefab);\r\n                block.width = this.blockSize;\r\n                block.height = this.blockSize;\r\n                this.blockParent.addChild(block);\r\n                block.setPosition(cc.v2(x,y));\r\n                this.positions[i][j] = cc.v2(x,y);\r\n                block.emit('setNum',0);\r\n                x+=this.interval + this.blockSize;\r\n            }\r\n            x = this.interval + this.blockSize/2;\r\n            y+=this.interval+this.blockSize;\r\n        }\r\n    },\r\n\r\n    init:function()\r\n    {\r\n        this.updateScore(0);\r\n        if(this.blocks)\r\n        {\r\n            for(var i =0;i<ROWS;i++)\r\n            {\r\n                for(var j=0;j<ROWS;j++)\r\n                {\r\n                    if(this.blocks[i][j] != null)\r\n                        this.blocks[i][j].destroy();\r\n                }\r\n            }\r\n        }\r\n\r\n        this.data = [];\r\n        this.blocks = [];\r\n        for(var i =0;i<ROWS;i++)\r\n        {\r\n            this.blocks.push(new Array(ROWS).fill(null));\r\n            this.data.push(new Array(ROWS).fill(0));\r\n        }\r\n\r\n        this.addBlock();\r\n        this.addBlock();\r\n        this.addBlock();\r\n        this.addEventHandler();\r\n    },\r\n\r\n    getEmptyLocation:function()\r\n    {\r\n        var locations = [];\r\n        for(var i = 0;i<this.blocks.length;i++)\r\n        {\r\n            for(var j=0;j<this.blocks[i].length;j++)\r\n            {\r\n                if(this.blocks[i][j] == null)\r\n                {\r\n                    locations.push({x:i,y:j});\r\n                }\r\n            }\r\n        }\r\n        return locations;\r\n    },\r\n\r\n    updateScore:function(number)\r\n    {\r\n        this.score = number;\r\n        this.scoreLab.string = \"分数：\"+this.score;\r\n    },\r\n\r\n    addBlock:function(){\r\n        var locations = this.getEmptyLocation();\r\n        var location = locations[Math.floor(Math.random()*locations.length)];\r\n        if(location.length == 0) return false;\r\n\r\n        var x = location.x;\r\n        var y = location.y;\r\n        var position = this.positions[x][y];\r\n        var block = cc.instantiate(this.blockPrefab);\r\n        var num = NUMBERS[Math.floor(Math.random()*NUMBERS.length)];\r\n        block.width = this.blockSize;\r\n        block.height = this.blockSize;\r\n        this.blockParent.addChild(block);\r\n        block.setPosition(position);\r\n        block.emit('setNum',num);\r\n        this.blocks[x][y] = block;\r\n        this.data[x][y] = num;\r\n        return true;\r\n    },\r\n\r\n    addEventHandler:function(){\r\n        this.node.on('touchstart',this.touchStart,this);\r\n\r\n        this.node.on('touchend',this.touchEnd,this);\r\n\r\n        this.node.on('touchcancel',this.touchEnd,this);\r\n\r\n    },\r\n\r\n    destroyEventHandler:function(){\r\n        this.node.off('touchstart',this.touchStart,this);\r\n        this.node.off('touchend',this.touchEnd,this);\r\n        this.node.off('touchcancel',this.touchEnd,this);\r\n\r\n    },\r\n\r\n    touchStart:function(event){\r\n        this.startPoint = event.getLocation();\r\n    },\r\n\r\n    touchEnd:function(event)\r\n    {\r\n        this.endPoint = event.getLocation();\r\n            \r\n        var vec = this.endPoint.sub(this.startPoint);\r\n        if(vec.mag() > MINLEN)\r\n        {\r\n            if(Math.abs(vec.x) > Math.abs(vec.y))\r\n            {\r\n                if(vec.x >0)\r\n                    this.moveRight();\r\n                else\r\n                    this.moveLeft();\r\n            }\r\n            else\r\n            {\r\n                if(vec.y >0)\r\n                    this.moveUp();\r\n                else\r\n                    this.moveDown();\r\n            }\r\n        }\r\n    },\r\n\r\n    checkFail:function(){\r\n        for(var i=0;i<ROWS;i++)\r\n        {\r\n            for(var j=0;j<ROWS;j++)\r\n            {\r\n                var n = this.data[i][j];\r\n                if(n == 0) return false;\r\n                if(i > 0 && n == this.data[i-1][j]) return false; \r\n                if(i < (ROWS - 1) && n == this.data[i+1][j]) return false; \r\n                if(j > 0 && n == this.data[i][j-1]) return false; \r\n                if(j < (ROWS - 1) && n == this.data[i][j+1]) return false; \r\n                if(n == 2048) return true; \r\n            }\r\n        }\r\n        return true;\r\n    },\r\n\r\n    gameOver:function(){\r\n        this.destroyEventHandler();\r\n        this.overFrame.setPosition(cc.v2(0,0));\r\n    },\r\n    \r\n    afterMove:function(hasMoved){\r\n        if(hasMoved)\r\n        {\r\n            this.addBlock();\r\n            this.updateScore(this.score+1);\r\n        }\r\n\r\n        if(this.checkFail())\r\n        {\r\n            this.gameOver();\r\n        }\r\n\r\n\r\n    },\r\n\r\n    moveRight:function()\r\n    {\r\n        cc.log('r');\r\n        var hasMoved = false;\r\n        var toMove = [];\r\n        var move = (x,y,callback) =>{\r\n            if(y == (ROWS - 1) || this.data[x][y] == 0)\r\n            {\r\n                callback && callback();\r\n                return;\r\n            }\r\n            else if(this.data[x][y+1] == 0)\r\n            {\r\n                var block = this.blocks[x][y];\r\n                var position = this.positions[x][y+1];\r\n                this.blocks[x][y] = null;\r\n                this.blocks[x][y+1] = block;\r\n                this.data[x][y+1] = this.data[x][y];\r\n                this.data[x][y] = 0;\r\n\r\n                this.doMove(block,position,()=>{\r\n                    move(x,y+1,callback);\r\n                });\r\n                hasMoved = true;\r\n            }\r\n            else if(this.data[x][y+1] == this.data[x][y])\r\n            {\r\n\r\n                var block = this.blocks[x][y];\r\n                var position = this.positions[x][y+1];\r\n                this.blocks[x][y] = null;\r\n                this.data[x][y] = 0;\r\n                this.data[x][y+1]*=2;\r\n                this.blocks[x][y+1].emit('setNum',this.data[x][y+1]);\r\n                this.doMove(block,position,()=>{\r\n                    block.destroy();\r\n                    callback && callback();\r\n                });\r\n                hasMoved = true;\r\n            }\r\n            else\r\n            {\r\n                callback && callback();\r\n                return;\r\n            }\r\n        };\r\n\r\n        for(var i=0;i<ROWS;i++)\r\n        {\r\n            for(var j=ROWS-1;j>=0;j--)\r\n            {\r\n                if(this.data[i][j] != 0)\r\n                {\r\n                    toMove.push({x:i,y:j});\r\n                }\r\n            }\r\n        }\r\n\r\n        var counter = 0;\r\n        for(var i=0;i<toMove.length;i++)\r\n        {\r\n            move(toMove[i].x,toMove[i].y,()=>{\r\n                counter++;\r\n                if(counter == toMove.length)\r\n                {\r\n                    this.afterMove(hasMoved);\r\n                }\r\n            });\r\n        }\r\n    },\r\n\r\n    doMove:function(block,position,callback)\r\n    {\r\n        var moveTo = cc.moveTo(MOVEINTERVAL,position);\r\n        var call  = cc.callFunc(()=>{\r\n            callback && callback();\r\n        });\r\n        block.runAction(cc.sequence(moveTo,call));\r\n    },\r\n\r\n\r\n    moveLeft:function()\r\n    {\r\n        cc.log('l');\r\n        var hasMoved = false;\r\n        var toMove = [];\r\n        var move = (x,y,callback) =>{\r\n            if(y == 0 || this.data[x][y] == 0)\r\n            {\r\n                callback && callback();\r\n                return;\r\n            }\r\n            else if(this.data[x][y-1] == 0)\r\n            {\r\n                var block = this.blocks[x][y];\r\n                var position = this.positions[x][y-1];\r\n                this.blocks[x][y] = null;\r\n                this.blocks[x][y-1] = block;\r\n                this.data[x][y-1] = this.data[x][y];\r\n                this.data[x][y] = 0;\r\n\r\n                this.doMove(block,position,()=>{\r\n                    move(x,y-1,callback);\r\n                });\r\n                hasMoved = true;\r\n            }\r\n            else if(this.data[x][y-1] == this.data[x][y])\r\n            {\r\n\r\n                var block = this.blocks[x][y];\r\n                var position = this.positions[x][y-1];\r\n                this.blocks[x][y] = null;\r\n                this.data[x][y] = 0;\r\n                this.data[x][y-1]*=2;\r\n                this.blocks[x][y-1].emit('setNum',this.data[x][y-1]);\r\n                this.doMove(block,position,()=>{\r\n                    block.destroy();\r\n                    callback && callback();\r\n                });\r\n                hasMoved = true;\r\n            }\r\n            else\r\n            {\r\n                callback && callback();\r\n                return;\r\n            }\r\n        };\r\n\r\n        for(var i=0;i<ROWS;i++)\r\n        {\r\n            for(var j=0;j<ROWS;j++)\r\n            {\r\n                if(this.data[i][j] != 0)\r\n                {\r\n                    toMove.push({x:i,y:j});\r\n                }\r\n            }\r\n        }\r\n\r\n        var counter = 0;\r\n        for(var i=0;i<toMove.length;i++)\r\n        {\r\n            move(toMove[i].x,toMove[i].y,()=>{\r\n                counter++;\r\n                if(counter == toMove.length)\r\n                {\r\n                    this.afterMove(hasMoved);\r\n                }\r\n            });\r\n        }\r\n    },\r\n    moveUp:function()\r\n    {\r\n        cc.log('u');\r\n        var hasMoved = false;\r\n        var toMove = [];\r\n        var move = (x,y,callback) =>{\r\n            if(x == (ROWS-1) || this.data[x][y] == 0)\r\n            {\r\n                callback && callback();\r\n                return;\r\n            }\r\n            else if(this.data[x+1][y] == 0)\r\n            {\r\n                var block = this.blocks[x][y];\r\n                var position = this.positions[x+1][y];\r\n                this.blocks[x][y] = null;\r\n                this.blocks[x+1][y] = block;\r\n                this.data[x+1][y] = this.data[x][y];\r\n                this.data[x][y] = 0;\r\n\r\n                this.doMove(block,position,()=>{\r\n                    move(x+1,y,callback);\r\n                });\r\n                hasMoved = true;\r\n            }\r\n            else if(this.data[x+1][y] == this.data[x][y])\r\n            {\r\n\r\n                var block = this.blocks[x][y];\r\n                var position = this.positions[x+1][y];\r\n                this.blocks[x][y] = null;\r\n                this.data[x][y] = 0;\r\n                this.data[x+1][y]*=2;\r\n                this.blocks[x+1][y].emit('setNum',this.data[x+1][y]);\r\n                this.doMove(block,position,()=>{\r\n                    block.destroy();\r\n                    callback && callback();\r\n                });\r\n                hasMoved = true;\r\n            }\r\n            else\r\n            {\r\n                callback && callback();\r\n                return;\r\n            }\r\n        };\r\n\r\n        for(var i=ROWS-1;i>=0;i--)\r\n        {\r\n            for(var j=ROWS-1;j>=0;j--)\r\n            {\r\n                if(this.data[i][j] != 0)\r\n                {\r\n                    toMove.push({x:i,y:j});\r\n                }\r\n            }\r\n        }\r\n\r\n        var counter = 0;\r\n        for(var i=0;i<toMove.length;i++)\r\n        {\r\n            move(toMove[i].x,toMove[i].y,()=>{\r\n                counter++;\r\n                if(counter == toMove.length)\r\n                {\r\n                    this.afterMove(hasMoved);\r\n                }\r\n            });\r\n        }\r\n    },\r\n    moveDown:function()\r\n    {\r\n        cc.log('d');\r\n        var hasMoved = false;\r\n        var toMove = [];\r\n        var move = (x,y,callback) =>{\r\n            if(x == 0 || this.data[x][y] == 0)\r\n            {\r\n                callback && callback();\r\n                return;\r\n            }\r\n            else if(this.data[x-1][y] == 0)\r\n            {\r\n                var block = this.blocks[x][y];\r\n                var position = this.positions[x-1][y];\r\n                this.blocks[x][y] = null;\r\n                this.blocks[x-1][y] = block;\r\n                this.data[x-1][y] = this.data[x][y];\r\n                this.data[x][y] = 0;\r\n\r\n                this.doMove(block,position,()=>{\r\n                    move(x-1,y,callback);\r\n                });\r\n                hasMoved = true;\r\n            }\r\n            else if(this.data[x-1][y] == this.data[x][y])\r\n            {\r\n\r\n                var block = this.blocks[x][y];\r\n                var position = this.positions[x-1][y];\r\n                this.blocks[x][y] = null;\r\n                this.data[x][y] = 0;\r\n                this.data[x-1][y]*=2;\r\n                this.blocks[x-1][y].emit('setNum',this.data[x-1][y]);\r\n                this.doMove(block,position,()=>{\r\n                    block.destroy();\r\n                    callback && callback();\r\n                });\r\n                hasMoved = true;\r\n            }\r\n            else\r\n            {\r\n                callback && callback();\r\n                return;\r\n            }\r\n        };\r\n\r\n        for(var i=0;i<ROWS;i++)\r\n        {\r\n            for(var j=ROWS-1;j>=0;j--)\r\n            {\r\n                if(this.data[i][j] != 0)\r\n                {\r\n                    toMove.push({x:i,y:j});\r\n                }\r\n            }\r\n        }\r\n\r\n        var counter = 0;\r\n        for(var i=0;i<toMove.length;i++)\r\n        {\r\n            move(toMove[i].x,toMove[i].y,()=>{\r\n                counter++;\r\n                if(counter == toMove.length)\r\n                {\r\n                    this.afterMove(hasMoved);\r\n                }\r\n            });\r\n        }\r\n    },\r\n\r\n    // update (dt) {},\r\n});\r\n"]}